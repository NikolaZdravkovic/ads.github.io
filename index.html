<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    body {
        background-color: black;
    }

    #iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('300x600.jpg');
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
    }
</style>

<body>
    <a href="javascript:window.open(window.clickTag)" class="oc_frame">
        <div id="iframe"></div>

    </a>


    <script>

        // window.onload = function () {

        var clickTag;
        var deepLink;

        var iframe = document.getElementById('iframe'); // Nas iframe
        // document.querySelector(".oc_frame").removeAttribute("href");

        // window.addEventListener('message', function (e) {


        //     // console.log(e.data);



        //     clickTag = e.data.clickTag;
        //     deepLink = e.data.deepLink;


        //     // if (e.origin !== "http://127.0.0.1:5500") {
        //     //     return;
        //     // } else {

        //     //     clickTag = e.data

        //     // }
        //     console.log(e.data);
        //     console.log(clickTag);

        // });

        var anchor = document.getElementsByTagName("a")[0];
        var att = document.createAttribute("id");
        att.value = "wrapper";

        anchor.removeAttribute("href");
        anchor.setAttributeNode(att);


        var wrapper = document.getElementById('wrapper');
        



        window.addEventListener('message', function (e) {

            if (e.data == "https://www.google.rs/") {
                console.log('child recived message')
            }

        });


        // document.getElementById('wrapper').addEventListener('click', function () {
        //     // window.open('https://www.google.rs/');
        //     alert('this will probably work')
        // })


        wrapper.addEventListener('click', function () {
            // window.open(clickTag)
            // window.parent.myFunction();
            parent.postMessage("This is a message", "*");

            // if (deepLink === true) {
            //     admob.opener.canOpen(clickTag, function (checkType, results) {
            //         if (results['clickTag']) {
            //             admob.recordEvent('%%CLICK_URL_ESC%%');
            //             admob.opener.openUrl(clickTag, false);
            //         } else {
            //             admob.opener.openUrl(`%%CLICK_URL_UNESC%%${clickTag}`, false);
            //         }
            //     });
            // } else {
            //     admob.opener.openUrl(`%%CLICK_URL_UNESC%%${clickTag}`, true);
            // }
        });

        // }



        // console.log(clickTag)

        // var iframe = document.getElementById('iframe'); // Nas iframe

        // iframe.addEventListener('click', function () {
        //     top.window.open(clickTag)
        // })


        // window.onload = function () {
        //     var iframe = document.getElementById('iframe'); // Nas iframe

        //     var iframeUrl = 'https://www.google.rs/' //Njihov url koji je defnisan iz njhihovog adsServera

        //     // Click tag koji bi trebalo da dodje od spolja iz goggle ad managera( U nasem slucaju sam dodao da to bude "diwanee tag") kako bi na njihov google url dodao tag diwanee i pretrazio diwanee u googlu

        //     var clickTag = '/search?sxsrf=ALeKk03dWOP3d_EJIOESxhmfO39mSz11kg%3A1601384132521&ei=xC5zX9-7H5G1U7ujg9AF&q=diwanee&oq=diwanee&gs_lcp=CgZwc3ktYWIQAzIFCAAQywEyBQgAEMsBMgUIABDLATIFCAAQywEyBQgAEMsBMgQIABAeMgQIABAeMgYIABAKEB4yBggAEAoQHjIECAAQHjoHCAAQRxCwAzoECCMQJzoECC4QJzoICAAQsQMQgwE6BQgAELEDOgQIABBDOgIIADoFCC4QsQM6BAgAEAo6BAguEAo6BQguEMsBULdmWMdtYOhuaAJwAngAgAFliAGJBZIBAzYuMZgBAKABAaoBB2d3cy13aXrIAQjAAQE&sclient=psy-ab&ved=0ahUKEwjfrfjitI7sAhWR2hQKHbvRAFoQ4dUDCA0&uact=5'

        //     // Url od kompletnog iframe koji ce se proslediti u funkciji kada se klikne na reklamu
        //     var iframeSrc = iframeUrl + clickTag;

        //     iframe.contentWindow.document.onclick = function () {
        //         top.window.open(iframeSrc)
        //     };
        // };

    </script>
</body>

</html>